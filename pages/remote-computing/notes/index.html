<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <link rel="stylesheet" href="/ws23_ulg_vu_ama_performance/libs/highlight/github.min.css">
   
    <script src="/ws23_ulg_vu_ama_performance/libs/clipboard.min.js"></script>
  
  
  <script src="/ws23_ulg_vu_ama_performance/libs/plotly-1_58_5.min.js"></script> 
  <script>
    // This function is used when calling `\fig{...}` See # Using \fig{...} below
    const PlotlyJS_json = async (div, url) => {
      response = await fetch(url); // get file
      fig = await response.json(); // convert it to json
      // Make the plot fit the screen responsively. See the documentation of plotly.js. https://plotly.com/javascript/responsive-fluid-layout/
      if (typeof fig.config === 'undefined') { fig["config"]={} }
      delete fig.layout.width
      delete fig.layout.height
      fig["layout"]["autosize"] = true
      fig["config"]["autosizable"] = true
      fig["config"]["responsive"] = true

      // make it easier to scroll throught the website rather than being blocked by a figure.
      fig.config["scrollZoom"] = false

      // PlotlyJS.savefig by default add the some more attribute to make a static plot.
      // Disable them to make the website fancier.
      delete fig.config.staticPlot
      delete fig.config.displayModeBar
      delete fig.config.doubleClick
      delete fig.config.showTips

      Plotly.newPlot(div, fig);
    };
  </script>
  
  <link rel="stylesheet" href="/ws23_ulg_vu_ama_performance/css/jtd.css">
<link rel="stylesheet" href="/ws23_ulg_vu_ama_performance/css/extras.css">
<link rel="icon" href="/ws23_ulg_vu_ama_performance/assets/favicon.ico">

<style>
  /* #148 wrap long header */
  .franklin-content a.header-anchor,
  .franklin-toc li a
   {
    word-wrap: break-word;
    white-space: normal;
  }
</style>

   <title>Remote Computing - Notes</title>  
</head>
<body>                      <!-- closed in foot.html -->
<div class="page-wrap">   <!-- closed in foot.html -->
  <!-- SIDE BAR -->
  <div class="side-bar">
    <div class="header">
      <a href="/ws23_ulg_vu_ama_performance/" class="title">
        Julia
      </a>
    </div>
    <label for="show-menu" class="show-menu">MENU</label>
    <input type="checkbox" id="show-menu" role="button">
    <div class="menu" id="side-menu">
      <ul class="menu-list">
        <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/" class="menu-list-link ">Start</a>
        <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/hpc/" class="menu-list-link ">Parallel computing</a>
          <ul class="menu-list-child-list ">
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/hpc/performance/" class="menu-list-link ">Measuring performance</a>
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/hpc/simd/" class="menu-list-link ">Single Instruction Multiple Data</a>
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/hpc/pi/" class="menu-list-link ">&pi; example</a>
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/hpc/multithreading/" class="menu-list-link ">Multithreading</a>
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/hpc/distributed/" class="menu-list-link ">Distributed computing</a>
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/hpc/gpu/" class="menu-list-link ">GPU computing</a>
          </ul>
        <li class="menu-list-item active"><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/" class="menu-list-link active">Remote computing</a>
          <ul class="menu-list-child-list ">
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/history" class="menu-list-link ">History</a>
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/hpc/" class="menu-list-link ">High Performance Computing</a>
            <ul class="menu-list-child-list ">
              <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/hpc/basics" class="menu-list-link ">Basics</a>
              <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/hpc/architecture" class="menu-list-link ">Architecture</a>
              <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/hpc/usage" class="menu-list-link ">Usage</a>
            </ul>
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/cloud/" class="menu-list-link ">Cloud Computing</a>
              <ul class="menu-list-child-list ">
                <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/cloud/basics" class="menu-list-link ">Basics</a>
                <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/cloud/architecture" class="menu-list-link ">Architecture</a>
                <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/cloud/setup_vhpc" class="menu-list-link ">Setup vHPC</a>
              </ul>
            <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/remote-computing/notes/" class="menu-list-link active">Notes</a>
          </ul>
          <li class="menu-list-item "><a href="/ws23_ulg_vu_ama_performance/pages/exercises/" class="menu-list-link ">Exercises</a>
      </ul>
    </div>
    <div class="footer">
      This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target="_blank">Jekyll theme</a>.
    </div>
  </div>
  <!-- CONTENT -->
  <div class="main-content-wrap"> <!-- closed in foot.html -->
    <div class="main-content">    <!-- closed in foot.html -->
      <div class="main-header">
        WS23 971007 VU Advanced Methods and its Applications - Performance topics
      </div>



<!-- Content appended here (in class franklin-content) -->
<div class="franklin-content"><h1 id="notes"><a href="#notes" class="header-anchor">Notes</a></h1>
<div class="franklin-toc"><ol><li><a href="#overview">Overview</a></li><li><a href="#why_do_hpc_and_cloud_computing_exist_as_separate_entities_instead_of_being_a_unified_concept">Why do HPC and cloud computing exist as separate entities instead of being a unified concept?</a><ol><li><a href="#purpose">Purpose</a></li><li><a href="#security">Security</a></li><li><a href="#storage">Storage</a></li><li><a href="#a_hybrid">A hybrid</a></li></ol></li><li><a href="#run_your_to_code_on_an_hpc_system_and_it_is_faster">Run your to code on an HPC system and it is faster</a></li><li><a href="#just_move_the_application_to_the_cloud">Just move the application to the cloud</a></li></ol></div>
<h2 id="overview"><a href="#overview" class="header-anchor">Overview</a></h2>
<p>We discussed High Performance Computing Systems and Cloud Systems &#40;way more for HPC&#41;. Now there are some insights and notes that do not perfectly fit in either of the sections but we would like to share anyway. </p>
<div class="important"><p><strong>A short disclaimer:</strong></p>
<p>The authors have some experience with HPC Systems, private and public clouds. By no measure are they experts and these are just some insights after a lot of time spent in these often conflicting fields.</p></div>
<h2 id="why_do_hpc_and_cloud_computing_exist_as_separate_entities_instead_of_being_a_unified_concept"><a href="#why_do_hpc_and_cloud_computing_exist_as_separate_entities_instead_of_being_a_unified_concept" class="header-anchor">Why do HPC and cloud computing exist as separate entities instead of being a unified concept?</a></h2>
<p>On a first glance, looking at the two systems in terms of architecture, there is not much difference. Nevertheless, the two worlds are hard to combine and people working in one field have a hard time understanding someone from the other and vice versa. This is due to the fact that the same terms &#40;can&#41; have different meanings in HPC and in cloud systems and from personal experience we can tell that the two groups come to discussions with unspoken assumptions on the system that conflict with the other world. </p>
<p>We need to stress, that this is not always the case and that there are some HPC clusters that are deployed via a cloud managing software like openstack and that a lot of HPC systems come with a cloud part to provide services better suited for this setup, see for example the <a href="../hpc/architecture/#real_world_examples">architecture of Lumi</a>.</p>
<p>So here are some reasons for these two separated worlds.</p>
<h3 id="purpose"><a href="#purpose" class="header-anchor">Purpose</a></h3>
<p>The two systems are designed for different purposes. </p>
<p>An HPC system is designed for one purpose and one only, to have as much performance as possible. All components are fine-tuned to squeeze out the most flops possible. The software that is run is also fine-tuned, the specific architecture of the CPU is known to optimize the compiler, the code knows the architecture and relative positions of various sub programs on other nodes to optimize communication, I/O is layered with computation calls to save time and so forth. </p>
<p>On the other hand, a cloud system is more general purpose. One node might run a web server with a single page app or a static HTML page, a database application as well as an AI training model at the same time. This might change quickly and also the workload changes. Maybe it is christmas and the web page has so many users that you actually start a second instance, handle the traffic correct for each user and boost throughput. For all of this flops do not a valid measure of <em>performance</em>.</p>
<p>Performance is measured differently. It is almost impossible to know the architecture of our CPU, we will also not get the highest performance as there is an abstraction layer with the virtualization that is used. In the case of a public cloud we do not even know in which data center our VM is running, so if we have two that work together optimizing the traffic is not possible. Worse, the VM might even migrate to a different node over time, if it fits better somewhere else. Maybe our node is oversubscribed, because the cloud software &#40;can&#41; assume that not all applications will always use 100&#37; of the CPU.</p>
<p>All of this sums to two very distinct use cases that are hard to combine. Given the relentless hunger for flops of the HPC bubble and the almost religious way of abstracting everything by the cloud community.</p>
<h3 id="security"><a href="#security" class="header-anchor">Security</a></h3>
<p>When we come to security the two worlds look very different as well.</p>
<p>Once we are in a HPC System we are free to move, there is not a lot of security holding us back, yes we have to go through the job scheduler and we are not allowed to be <code>root</code> but not much more.  We can install software, use as much traffic between nodes as possible, no password to access individual nodes, no token to allow applications to run and so forth. If our program is written poorly we can use more resources than the job scheduler allows &#40;mainly on older systems&#41;, this will not make the other users happy and we will get a stern warning from the admins but that is it. In short we are in a gated system that is a trusted system once we are in.</p>
<p>The cloud system is <em>security first</em>. Everything is built with security in mind. This also means, we always assume that we are in an unsecure environment and therefore we need to do everything to make our application as secure as possible. Even on the cloud software side, the virtualization allows us to capsule each application better and also limit its resources so no other application can be affected. Connections between and maybe entire VMs are encrypted. We do not log in with username and password, just with a token that is only valid for a short time. All of this costs performance but is necessary to hold up the high goal of <em>security first</em>.</p>
<h3 id="storage"><a href="#storage" class="header-anchor">Storage</a></h3>
<p>The storage systems are very different.  An HPC storage should allow high I/O throughput to not slow down the application whereas on cloud systems entire blobs of storage function as VM hard drives and access patterns are very different. </p>
<p>Also here, they are built for different purposes in mind and perform poorly for the other system.</p>
<h3 id="a_hybrid"><a href="#a_hybrid" class="header-anchor">A hybrid</a></h3>
<p>That does not mean it can not work. Something like <a href="https://juliahub.com/">JuliaHub</a> can be considered a cloud for HPC workloads. Also the big cloud providers will offer something called <strong>burst computing</strong> where you move your HPC workload to the cloud when you need more and have it locally otherwise.</p>
<h2 id="run_your_to_code_on_an_hpc_system_and_it_is_faster"><a href="#run_your_to_code_on_an_hpc_system_and_it_is_faster" class="header-anchor">Run your to code on an HPC system and it is faster</a></h2>
<p>As we have seen in the <a href="../../hpc/">parallel computing</a> there is more to it than one might think. The first couple of speed up factors are easy because these systems just have faster CPUs and more RAM. If we actually want to do have an optimized code this is hard work and needs time and also comes to the price of possibly introducing bugs while worsening readability as well as maintainability and portability. To get access to the very large systems like Lumi you first need to show that your code runs on smaller systems, that the scaling is good and that you will use the CPU time you get <em>well</em> &#40;impact&#41;.</p>
<h2 id="just_move_the_application_to_the_cloud"><a href="#just_move_the_application_to_the_cloud" class="header-anchor">Just move the application to the cloud</a></h2>
<p>Again a familiar phrase. We have not discussed this but all of the cloud technologies like kubernetes, serverless apps and so forth are not easy to handle. Data traffic, user authentication, security, capsuling the application into a Docker image are hard to do. You basically have to learn a new operating system and there are often so many abstractions that it is hard to find out what did go wrong and when.</p>

<figure style="text-align:center;">
<img src="/ws23_ulg_vu_ama_performance/assets/pages/remote-computing/cloud/meme.png" style="padding:0; " alt=" Notes on Cloud deployment."/>
<figcaption> Notes on Cloud deployment. Original source: <p style="font-size:11px"><a href=" https://www.reddit.com/media?url=https%3A%2F%2Fpreview.redd.it%2Fswitchtok8snow-v0-md967r97muyb1.jpg%3Fauto%3Dwebp%26s%3Dea7d90420c70472abf21a6830a1807d22b1e1bea"> https://www.reddit.com/media?url=https%3A%2F%2Fpreview.redd.it%2Fswitchtok8snow-v0-md967r97muyb1.jpg%3Fauto%3Dwebp%26s%3Dea7d90420c70472abf21a6830a1807d22b1e1bea</a></p></figcaption>
</figure>

<div class="page-foot">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> - <a href="https://ehrensperger.dev/">Gregor Ehrensperger</a>, <a href="https://orcid.org/0000-0003-3601-0852">Peter Kandolf</a>. Last modified: January 15, 2024.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div><!-- CONTENT ENDS HERE -->
    </div> <!-- end of class main-content -->
    </div> <!-- end of class main-content-wrap -->
    </div> <!-- end of class page-wrap-->
    
    
      


      <script>
    (function(){
    
      // Get the elements.
      // - the 'pre' element.
      // - the 'div' with the 'paste-content' id.
    
      var pre = document.getElementsByTagName('pre');
    
      // Add a copy button in the 'pre' element.
      // which only has the className of 'language-'.
    
      for (var i = 0; i < pre.length; i++) {
        var isLanguage = pre[i].children[0].tagName == 'CODE';
    
        if ( isLanguage ) {
          var button           = document.createElement('button');
              button.className = 'copy-button';
              button.textContent = 'Copy';
    
              pre[i].appendChild(button);
        }
      };
    
      // Run Clipboard
    
      var copyCode = new Clipboard('.copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
    
      // On success:
      // - Change the "Copy" text to "Copied".
      // - Swap it to "Copy" in 2s.
      // - Lead user to the "contenteditable" area with Velocity scroll.
    
      copyCode.on('success', function(event) {
        event.clearSelection();
        event.trigger.textContent = 'Copied';
        window.setTimeout(function() {
          event.trigger.textContent = 'Copy';
        }, 2000);
    
      });
    
      // On error (Safari):
      // - Change the  "Press Ctrl+C to copy"
      // - Swap it to "Copy" in 2s.
    
      copyCode.on('error', function(event) {
        event.trigger.textContent = 'Press "Ctrl + C" to copy';
        window.setTimeout(function() {
          event.trigger.textContent = 'Copy';
        }, 5000);
      });
    
    })();
</script>
    
  </body>
</html>

<script>
  var coll = document.getElementsByClassName("collapsible");
  var i;

  for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var content = this.nextElementSibling;
      if (content.style.display === "block") {
        content.style.display = "none";
      } else {
        content.style.display = "block";
      }
    });
  }
</script>

<script>
  var coll = document.getElementsByClassName("solutioncollapsible");
  var sols = document.getElementsByClassName("solution");
  
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);
  const myVar = urlParams.get('solution')

  if ( myVar == 'true') {
    for (i = 0; i < coll.length; i++) {
      coll[i].style.display = "block";
    }

    for (i = 0; i < sols.length; i++) {
      sols[i].style.display = "block";
    }
  }
</script>